# 用依赖注入和代理模式实现状态模式
## stateful对象的关注点
   1. 对象状态的确定
     状态是由对象的一个和多个属性决定的,比如对象有2个状态state1,state2。复杂情况下对象的状态是由对象的多个属性根据算法计算获得的
   2. 对象状态的变化
     当决定状态的属性变化的时候，对象的状态会发生变化
   3. 对象状态对行为的约束  
     对象可以有多个行为，比如method1()，method2()，method3()。
     对象的行为受到状态的约束，比如在对象在state1 下，只能做method1的操作，在state2下只能做method2，method3的操作
## 传统的对stateful对象的实现
  代码和类图：: 电梯操作的例子  http://blog.csdn.net/hguisu/article/details/7557252<br>
  缺点: 
   1. 确定某个状态拥有哪些行为需要大量的分支语句(if-else or switch)
   2. 当增加状态或者行为的时候，需要修改大量代码。
  
## 经典的状态模式
   类图 ： <br>
   类图的讲解： 状态接口，具体的状态类，当前状态的代理<br>
   代码实例：<br>
   http://blog.csdn.net/hguisu/article/details/7557252<br>
   优点：把状态和状态对行为的约束从对象的代码中抽离出来，从原来对象依赖对象的状态变为对象的状态依赖对象
      对象类专注行为，对象的状态类专注于对行为的约束

   
## 依赖注入和动态代理实现的状态模式
   类图<br>
   代码实例<br>
   时序图<br>
   优点：当前状态的代理用C#的ProxyGenerator动态代理实现，开发人员只需要关注实现状态类和注册状态类<br>
   
   
## 有层次的状态（一个对象的状态受其他对象的状态的影响）

